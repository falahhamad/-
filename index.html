<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat - GitHub Version</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Tajawal', sans-serif; }
        .glass { background: rgba(17, 25, 40, 0.7); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        .glass-input { background: rgba(0, 0, 0, 0.3); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .msg-bot { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(5px); }
        .msg-user { background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3); }
        .animate-msg { animation: slideIn 0.3s ease-out forwards; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-900 h-screen flex flex-col overflow-hidden bg-[url('https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2564&auto=format&fit=crop')] bg-cover bg-center">
    
    <div class="absolute inset-0 bg-slate-900/80 backdrop-blur-sm z-0"></div>

    <!-- Header -->
    <header class="glass sticky top-0 z-10 px-6 py-4 flex justify-between items-center shadow-2xl">
        <div class="flex items-center gap-3">
            <div class="p-2 bg-slate-800 rounded-xl border border-slate-700">
                <i data-lucide="bot" class="text-purple-400 w-6 h-6"></i>
            </div>
            <div>
                <h1 class="font-bold text-xl text-white">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</h1>
                <div class="flex items-center gap-2 text-[11px] text-gray-300">
                    <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                    <span>Ù…ØªØµÙ„ (GitHub Mode)</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Chat Area -->
    <main id="chatBox" class="flex-1 overflow-y-auto p-4 space-y-6 z-10 scroll-smooth pb-32">
        <div class="flex items-start gap-3 animate-msg">
            <div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center shrink-0 border border-slate-600">
                <i data-lucide="sparkles" class="w-4 h-4 text-yellow-400"></i>
            </div>
            <div class="msg-bot text-slate-100 px-5 py-3 rounded-2xl rounded-tr-none max-w-[85%] leading-relaxed shadow-lg">
                Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! ØªÙ… ØªØµØ­ÙŠØ­ Ø§Ù„Ù…ÙØªØ§Ø­ ÙˆÙ‡Ùˆ ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù† Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­. Ø¬Ø±Ø¨Ù†ÙŠ ÙˆØ§Ø³Ø£Ù„ Ø£ÙŠ Ø´ÙŠØ¡!
            </div>
        </div>
    </main>

    <!-- Loading -->
    <div id="loader" class="hidden absolute bottom-24 left-1/2 -translate-x-1/2 z-20">
        <div class="glass-input px-4 py-2 rounded-full flex items-center gap-2 text-purple-200 text-xs">
            <i data-lucide="loader-2" class="animate-spin w-4 h-4"></i>
            Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙƒØªØ§Ø¨Ø©...
        </div>
    </div>

    <!-- Input -->
    <footer class="p-4 z-20 w-full max-w-4xl mx-auto absolute bottom-0 left-0 right-0">
        <div class="glass-input rounded-[24px] p-2 flex items-end gap-2 shadow-2xl">
            <textarea id="userInput" class="flex-1 bg-transparent border-none outline-none text-white px-4 py-3 resize-none h-[48px]" rows="1" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..." onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();sendMessage();}"></textarea>
            <button onclick="sendMessage()" id="sendBtn" class="bg-indigo-600 hover:bg-indigo-500 text-white p-3 rounded-full transition-all shadow-lg mb-0.5">
                <i data-lucide="send" class="w-5 h-5"></i>
            </button>
        </div>
        <p class="text-center text-[10px] text-slate-500 mt-2">OpenAI Connected</p>
    </footer>

    <script>
        lucide.createIcons();
        
        // -----------------------------------------------------------
        // ğŸŸ¢ ØªÙ… Ø§Ù„ØªØµØ­ÙŠØ­: Ø§Ù„Ù…ÙØªØ§Ø­ ÙŠØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù ØµØºÙŠØ± (sk) Ø§Ù„Ø¢Ù†
        const API_KEY = "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";
        // -----------------------------------------------------------

        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const loader = document.getElementById('loader');

        async function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;

            addMessage(text, 'user');
            userInput.value = '';
            
            loader.classList.remove('hidden');
            sendBtn.disabled = true;

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: "gpt-3.5-turbo",
                        messages: [
                            { role: "system", content: "Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ ÙˆÙ…ÙÙŠØ¯ ØªØªØ­Ø¯Ø« Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©." },
                            { role: "user", content: text }
                        ]
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error.message);
                }
                
                const reply = data.choices[0].message.content;
                addMessage(reply, 'bot');

            } catch (error) {
                console.error(error);
                // Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
                if(error.message.includes("Incorrect API key")) {
                    addMessage("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…ÙØªØ§Ø­: ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ Ù†Ø³Ø®Øª Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„ØµØ­ÙŠØ­ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.", 'error');
                } else if (error.message.includes("quota")) {
                    addMessage("Ø§Ù†ØªÙ‡Ù‰ Ø±ØµÙŠØ¯ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙØªØ§Ø­ (Quota Exceeded).", 'error');
                } else {
                    addMessage("Ø­Ø¯Ø« Ø®Ø·Ø£: " + error.message, 'error');
                }
            } finally {
                loader.classList.add('hidden');
                sendBtn.disabled = false;
            }
        }

        function addMessage(text, type) {
            const div = document.createElement('div');
            const isUser = type === 'user';
            div.className = `flex items-end gap-3 animate-msg ${isUser ? 'flex-row-reverse' : ''}`;
            div.innerHTML = `
                <div class="w-8 h-8 rounded-full ${isUser ? 'bg-indigo-500' : type==='error'?'bg-red-500':'bg-slate-700'} flex items-center justify-center shrink-0 border border-white/10">
                    <i data-lucide="${isUser ? 'user' : type==='error'?'alert-circle':'bot'}" class="w-4 h-4 text-white"></i>
                </div>
                <div class="${isUser ? 'msg-user' : type==='error'?'bg-red-900/60 border border-red-500':'msg-bot'} px-5 py-3 rounded-2xl ${isUser ? 'rounded-br-none' : 'rounded-bl-none'} max-w-[85%] text-white text-[15px] leading-relaxed shadow-md">
                    ${text}
                </div>
            `;
            chatBox.appendChild(div);
            chatBox.scrollTo({ top: chatBox.scrollHeight, behavior: 'smooth' });
            lucide.createIcons();
        }
    </script>
</body>
</html>

